import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import java.io.File;
import java.io.IOException;
import java.util.Scanner;


public class Main {
    public static void main(String[] args) throws IOException {
        boolean flag = true;
        int currNum = 1 + (int) (10 * Math.random());
        int counter = 1 + (int) (10 * Math.random());
        Scanner scnr = new Scanner(System.in);

        // Start background music in a separate thread
        Thread musicThread = new Thread(Main::play_background_music);
        musicThread.setDaemon(true); // Allows program to exit even if music is playing
        musicThread.start();

        snake_ascii();
        System.out.println("Snake. Your mission is to guess the correct number 1-10. Hurry.");
        while (flag && counter > 0) {
            int guess = scnr.nextInt();
            System.out.println("Snake - you guessed " + guess);
            play_sound("assets/tindeck_1.wav");

            if (guess == currNum) {
                System.out.println("Good job Snake, you made it out alive.");
                flag = false;
            }
            else {
                counter--;
                System.out.println("Incorrect. You're running out of time Snake!!");
                System.out.println("Guesses remaining: " + counter);
            }
        }
    }

    public static void snake_ascii() {
        System.out.println("""
                ....................................................................................................
                ....................................................................................................
                ......................................................-=:...........................................
                ..................................................=***#####++-......................................
                ................................................=**###%%%%%%%*=:....................................
                ..............................................-**##%#%%#@%%%@%%#=...................................
                .............................................:***%%#%%@@@@@%@@@%#=..................................
                .............................................-########%%%%%@@@%%%+:.................................
                ..........................................:::-+***#*#*#%%%%@@%##++..................................
                ...................................:=##%%%%%%#**+**#####%%%@@@%#*:..................................
                ................................-########*=-+++***##*#%%%%%%@@%#*...................................
                ............................:=:............:**+=:-*#%%@%@@@@@@@**=..................................
                .......................-#%#*:..........=*=..:+*-:::-===-:+###**-+...................................
                .......................-+=..........:*#+...:=====--:::-::=+***++-...................................
                ...................................*%#=....:#%%*==--====-*##**+==...................................
                .................................+#%*:.....:%%%*+===+***#%%##***=...................................
                ...............................+##+.........:+#***+*#*+*#%%%###--...................................
                ...........................:-++-:............-*#*###***#%%#%%%-.-...................................
                ......................:....................:-=+*#%##***###%%#:.+....................................
                ......................................::-=*++**##%%@%##%%%%#**+.....................................
                ..................................:==+**##*#=***###%%@@@@@@%%@@%##*===-.............................
                .............................:-====+**###%%%#@@@@@@@%%@@@@@@@@@@%%+.................................
                ..........................---==++++**+**#%#%%*#%%%@@**%%%@@@@@%%*#%%*=:.............................
                ........................-====+=+++*****+*##%@#%%#%%%%###%%@%@%######%##**-..........................
                .......................--===+*+++**#****+*##%%%%%##%%%%@%%%@%###%%##%%%##%*+-.......................
                .....................:-===++****#***#******####%#%%##%##@@#@@##%%%@##%%%%%%%#*......................
                ....................:====++***####*###***#**#@@@%@@##%%%%%%%@#%@@@@%##%%%%%%%#-.....................
                ...................:====+++**###%%##*###*#####%%%#%%##%%%%#@%%@@@@@%#*%#%%%%%#+.....................
                ..................---==++***##*#%%%%####***##*###%###%%%%%%%@%@@@%%%%%%%%%%%%#*=....................
                .................-====+++**####%%%%%%###*+*##**###%#%%##%@%%#@@@%%%%%%%%%%#%%##*:...................
                ................-====++***#%%##%%%%%%###**###**###%%%####@@@#@@%%%%%#%%@#@%#%%%#+...................
                ................=====+***##%%###%%%%%########+####%@@%@@@@@@%%%%%%%%###%%#@%#%%%#+..................
                ..............-===+***##*##%%###%%@@%###**%@@#####%@@%#%%@@@@#%%%%#%%%@@@@#@%##%%#+.................
                .............=*#%#%###%%###%%##%%%@%%####=*###*#*#%@@%##%%%%%%%%%%%%#%%@@@%%%%#%%%*.................""");
    }

    public static void play_sound(String filePath) {
        try {
            File soundFile = new File(filePath);
            AudioInputStream audioStream = AudioSystem.getAudioInputStream(soundFile);
            Clip clip = AudioSystem.getClip();
            clip.open(audioStream);
            clip.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void play_background_music() {
        try {
            File soundFile = new File("assets/Metal Gear Solid 3_ Snake Eater Theme [FLAC].wav");
            AudioInputStream audioStream = AudioSystem.getAudioInputStream(soundFile);
            Clip clip = AudioSystem.getClip();
            clip.open(audioStream);
            clip.loop(Clip.LOOP_CONTINUOUSLY); // Loop background music
            clip.start();

            // Keep the thread alive while music plays
            while (clip.isActive()) {
                Thread.sleep(1000);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}